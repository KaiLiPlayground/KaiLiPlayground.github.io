<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="AWS CodePipeline,CICD">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Kai Li">
    
    <title>
        
            Orchestration Pipeline - Project 1 |
        
        Kai Li
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/hello_new.jpg">
    
<link rel="stylesheet" href="/font/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/font/css/regular.min.css">

    
<link rel="stylesheet" href="/font/css/solid.min.css">

    
<link rel="stylesheet" href="/font/css/brands.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"kailiplayground.github.io","root":"/","language":"en","path":"search.xml"}
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066cc","logo":"/images/hello_new.jpg","favicon":"/images/hello_new.jpg","avatar":"/images/hello_new.jpg","font_size":null,"font_family":null,"hover":{"shadow":false,"scale":false},"first_screen":{"enable":false,"header_transparent":false,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving.","font_color":null,"hitokoto":false},"scroll":{"progress_bar":false,"percent":false}},"local_search":{"enable":true,"preload":true},"code_copy":{},"code_block":{"tools":{"enable":true,"style":"default"},"highlight_theme":"default"},"side_tools":{},"pjax":{"enable":false},"lazyload":{"enable":false},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.8"},"waline":{"server_url":null,"reaction":false,"version":2}},"post":{"author_label":{"enable":true,"auto":true,"custom_label_list":["Trainee","Engineer","Architect"]},"word_count":{"enable":false,"wordcount":false,"min2read":false},"img_align":"left","copyright_info":false},"version":"3.6.1"}
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"}
    KEEP.language_code_block = {"copy":"Copy code","copied":"Copied","fold":"Fold code block","folded":"Folded"}
    KEEP.language_copy_copyright = {"copy":"Copy copyright info","copied":"Copied","title":"Original article title","author":"Original article author","link":"Original article link"}
  </script>
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="/images/hello_new.jpg">
                </a>
            
            <a class="logo-title" href="/">
               Kai Li
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                TAGS
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                CATEGORIES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                ABOUT
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">TAGS</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">CATEGORIES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ABOUT</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            <div class="article-title">
                <span class="title-hover-animation">Orchestration Pipeline - Project 1</span>
            </div>

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/hello_new.jpg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Kai Li</span>
                            
                                <span class="author-label">Lv1</span>
                            
                        </div>
                        <div class="meta-info">
                            
<div class="article-meta-info">
    <span class="article-date article-meta-item">
        
            <i class="fa-regular fa-calendar-plus"></i>&nbsp;
        
        <span class="pc">2023-12-28 00:49:29</span>
        <span class="mobile">2023-12-28 00:49</span>
    </span>
    
        <span class="article-update-date article-meta-item">
        <i class="fas fa-file-pen"></i>&nbsp;
        <span class="pc">2024-01-09 01:32:37</span>
    </span>
    
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/AWS/">AWS</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/AWS-CodePipeline/">AWS CodePipeline</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/AWS-Step-Function-Orchestration/">AWS Step Function Orchestration</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content keep-markdown-body">
                

                <h1 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h1><p>This project is to make use of cloudformation stack to create codepipeline that will free us from clicking the UI to create&#x2F;define resources for the intent of this project which involves using services: Lambda Functions, SNS Topic, and Step functions.</p>
<p>The goal is to achieve the following: </p>
<ul>
<li><strong>Code Repository</strong>: Use AWS CodeCommit or a compatible version control system to store the application and CloudFormation templates.</li>
<li><strong>Deployment Automation</strong>:<ul>
<li>Use AWS CodePipeline to orchestrate the whole CI&#x2F;CD process.</li>
<li>Set up a source stage pointing to the repository.</li>
<li>Include a deploy stage to deploy CloudFormation stacks that instantiate the infrastructure.</li>
</ul>
</li>
</ul>
<blockquote>
<p>Project Git Repo: <a class="link"   target="_blank" rel="noopener" href="https://github.com/KaiLiPlayground/Data_Pipeline_Orchestration" >Data_Pipeline_Orchestration<i class="fas fa-external-link-alt"></i></a></p>
</blockquote>
<h2 id="Pipeline-Workflow"><a href="#Pipeline-Workflow" class="headerlink" title="Pipeline Workflow"></a>Pipeline Workflow</h2><p><img src="/2023/12/28/OrchestrationPipeline/cicd_workflow.png">  </p>
<h2 id="Create-the-Master-Codepipeline-Stack"><a href="#Create-the-Master-Codepipeline-Stack" class="headerlink" title="Create the Master Codepipeline Stack"></a>Create the Master Codepipeline Stack</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">aws cloudformation create<span class="literal">-stack</span> `</span><br><span class="line">      <span class="literal">--stack-name</span> OrchetrationStack `</span><br><span class="line">      <span class="literal">--template-body</span> file://&lt;Path to enter&gt;\orchestrationCP.yaml ` </span><br><span class="line">      <span class="literal">--parameters</span> `</span><br><span class="line">          ParameterKey=CodeCommitRepoName,ParameterValue=p1<span class="literal">-orchestration</span> `</span><br><span class="line">          ParameterKey=BucketName,ParameterValue=dataeng<span class="literal">-clean-zone-etl</span> `</span><br><span class="line">      <span class="literal">--capabilities</span> CAPABILITY_IAM CAPABILITY_NAMED_IAM</span><br></pre></td></tr></table></figure>



<h2 id="What-does-the-original-project-do"><a href="#What-does-the-original-project-do" class="headerlink" title="What does the original project do?"></a>What does the original project do?</h2><p>This project demonstrates how to orchestrate a data pipeline using AWS Step Function, integrating AWS Lambda functions and Amazon SNS for process management and error notifications. The key steps and the purpose of the project are summarized as follows:</p>
<ul>
<li><p><strong>Orchestration with AWS Step Function</strong>:</p>
<ul>
<li>Introduces AWS Step Function for orchestrating data pipelines, suitable for both simple and complex workflows.</li>
<li>Utilizes Lambda functions to process data; however, in larger production pipelines, these could be replaced with AWS Glue jobs.</li>
</ul>
</li>
<li><p><strong>Lambda Function for File Type Checking</strong>:</p>
<ul>
<li>Sets up a Lambda function (<code>dataeng-check-file-ext</code>) to determine the file type of items uploaded to an S3 bucket.</li>
<li>The function analyzes the file extension and passes this information to the Step Function state machine.</li>
</ul>
</li>
<li><p><strong>Lambda Function for Simulating Failures</strong>:</p>
<ul>
<li>Another Lambda function (<code>dataeng-random-failure-generator</code>) randomly generates failures to simulate real-world scenarios in data processing.</li>
</ul>
</li>
<li><p><strong>SNS Topic for Failure Notifications</strong>:</p>
<ul>
<li>Establishes an Amazon SNS topic (<code>dataeng-failure-notification</code>) to send email notifications in case of processing failures.</li>
</ul>
</li>
<li><p><strong>Step Function State Machine Configuration</strong>:</p>
<ul>
<li>Designs a state machine that starts with checking the file extension and then moves to a CHOICE state.</li>
<li>Processes supported file types (.csv) and uses SNS notifications for unsupported types or processing errors.</li>
</ul>
</li>
<li><p><strong>Event-Driven Workflow Setup</strong>:</p>
<ul>
<li>Configures AWS CloudTrail and Amazon EventBridge to trigger the state machine upon new file uploads to an S3 bucket.</li>
</ul>
</li>
<li><p><strong>Testing the Pipeline</strong>:</p>
<ul>
<li>Involves uploading files to the S3 bucket and observing the state machineâ€™s response, including handling both successful and failed executions.</li>
</ul>
</li>
</ul>
<p>Purpose of the project:</p>
<ul>
<li>The project aims to provide hands-on experience in building and managing an event-driven, serverless data pipeline on AWS.</li>
<li>It illustrates the integration of various AWS services, error handling, and the importance of observability in pipeline orchestration.</li>
<li>The exercise serves as a practical example of how AWS Step Function can streamline data pipeline workflows and handle complexities in real-world data engineering scenarios.</li>
</ul>
<blockquote>
<p>For more info, <a class="link"   target="_blank" rel="noopener" href="https://subscription.packtpub.com/book/data/9781800560413/8/ch08lvl1sec52/hands-on-ingesting-streaming-data?_gl=1*17mtlck*_gcl_au*MTI5MjU4OTg2MC4xNzAzNDg0Mzg5*_ga*MjExODIxOTUyMS4xNzAzNDg0Mzg5*_ga_Q4R8G7SJDK*MTcwMzgyMDk4NC40LjAuMTcwMzgyMDk4NC42MC4wLjA." >hands-on Orchestration with step functions<i class="fas fa-external-link-alt"></i></a></p>
</blockquote>

            </div>

            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/AWS-CodePipeline/">#AWS CodePipeline</a>&nbsp;
                        </li>
                    
                        <li class="tag-item">
                            <a href="/tags/AWS-Step-Function-Orchestration/">#AWS Step Function Orchestration</a>&nbsp;
                        </li>
                    
                </ul>
            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                               rel="prev"
                               href="/2023/12/28/DatabricksCertification/"
                            >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                                <span class="title flex-center">
                                <span class="post-nav-title-item">Databricks Certification</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                               rel="next"
                               href="/2023/12/27/DataMigration/"
                            >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Data Migration</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                                <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                            </a>
                        </div>
                    
                </div>
            

            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Motivation"><span class="nav-number">1.</span> <span class="nav-text">Motivation</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pipeline-Workflow"><span class="nav-number">1.1.</span> <span class="nav-text">Pipeline Workflow</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Create-the-Master-Codepipeline-Stack"><span class="nav-number">1.2.</span> <span class="nav-text">Create the Master Codepipeline Stack</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#What-does-the-original-project-do"><span class="nav-number">1.3.</span> <span class="nav-text">What does the original project do?</span></a></li></ol></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            
<footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
                <span>2020</span> -
            
            2024
            
                &nbsp;<i class="fas fa-heart icon-animate"></i>
                &nbsp;<a href="/">Kai Li</a>
            
        </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.6.1</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>





    
<script src="/js/local-search.js"></script>




    
<script src="/js/code-block.js"></script>





<div class="post-scripts">
    
        
<script src="/js/post-helper.js"></script>

        
            
<script src="/js/libs/anime.min.js"></script>

        
        
            
<script src="/js/toc.js"></script>

        
    
</div>



</body>
</html>
